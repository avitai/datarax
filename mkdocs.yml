site_name: Datarax Documentation
repo_url: https://github.com/avitai/datarax
site_description: JAX-native data pipeline framework with Flax NNX
site_author: The Datarax Team

theme:
  name: material
  language: en
  palette:
    # Light mode with automatic detection
    - media: "(prefers-color-scheme: light)"
      scheme: default
      primary: indigo
      accent: amber
      toggle:
        icon: material/brightness-7
        name: Switch to dark mode
    # Dark mode with automatic detection
    - media: "(prefers-color-scheme: dark)"
      scheme: slate
      primary: indigo
      accent: amber
      toggle:
        icon: material/brightness-4
        name: Switch to light mode
  features:
    # Navigation features with collapsible sections
    - navigation.path
    - navigation.top
    # Instant loading for better UX
    - navigation.instant
    - navigation.instant.prefetch
    - navigation.instant.progress
    # Enable navigation tracking
    - navigation.tracking
    # Table of contents
    - toc.follow
    # Search features
    - search.highlight
    - search.share
    - search.suggest
    # Content features
    - content.code.copy
    - content.code.annotate
    - content.tabs.link
    - content.tooltips
    # Enable Mermaid diagram support
    - content.mermaid
  icon:
    repo: fontawesome/brands/github
    logo: "material/flask-outline"
  font:
    text: Roboto
    code: Roboto Mono
  favicon: "_static/favicon.png"

# Extra configuration
extra:
  social:
    - icon: fontawesome/brands/github
      link: https://github.com/avitai/datarax
    - icon: fontawesome/brands/python
      link: https://pypi.org/project/datarax/

plugins:
  - search
  - ipynb
  - mkdocstrings:
      handlers:
        python:
          options:
            docstring_style: google
            docstring_options:
              ignore_init_summary: true
            merge_init_into_class: true
            show_submodules: true
            show_source: false
            show_bases: true
            show_inheritance_diagram: false
            group_by_category: true
            heading_level: 2
            members_order: source
            separate_signature: true
            show_signature_annotations: true
            signature_crossrefs: true
            show_if_no_docstring: true
            show_overloads: false
            show_root_heading: true
            show_symbol_type_heading: false
            show_symbol_type_toc: false
            filters:
              - "!^_"
              - "^__init__$"
            inherited_members: true
          inventories:
            - https://docs.python.org/3/objects.inv
            - https://jax.readthedocs.io/en/latest/objects.inv
            - https://flax.readthedocs.io/en/latest/objects.inv

markdown_extensions:
  - abbr
  - admonition
  - attr_list
  - def_list
  - footnotes
  - md_in_html
  - tables
  - toc:
      permalink: "Â¤"
      title: "On this page"
      toc_depth: 4
  # PyMdown Extensions for enhanced formatting
  - pymdownx.arithmatex:
      generic: true
  - pymdownx.betterem:
      smart_enable: all
  - pymdownx.caret
  - pymdownx.details
  - pymdownx.emoji:
      emoji_index: !!python/name:material.extensions.emoji.twemoji
      emoji_generator: !!python/name:material.extensions.emoji.to_svg
  - pymdownx.highlight:
      anchor_linenums: true
      line_spans: __span
      pygments_lang_class: true
  - pymdownx.inlinehilite
  - pymdownx.keys
  - pymdownx.mark
  - pymdownx.smartsymbols
  - pymdownx.snippets:
      base_path: docs
  - pymdownx.superfences:
      custom_fences:
        - name: mermaid
          class: mermaid
          format: !!python/name:pymdownx.superfences.fence_code_format
  - pymdownx.tabbed:
      alternate_style: true
  - pymdownx.tasklist:
      custom_checkbox: true
  - pymdownx.tilde

# MathJax for scientific/ML equations
extra_javascript:
  - javascripts/mathjax.js
  - https://polyfill.io/v3/polyfill.min.js?features=es6
  - https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js

# Custom CSS
extra_css:
  - _static/extra.css

nav:
  - Home: index.md
  - Getting Started:
      - Installation: getting_started/installation.md
      - Quick Start: getting_started/quick_start.md
      - Core Concepts: getting_started/core_concepts.md
  - User Guide:
      - Data Sources: user_guide/data_sources.md
      - DAG Construction: user_guide/dag_construction.md
      - Distributed Training: user_guide/distributed_training.md
      - Benchmarking: user_guide/benchmarking.md
      - Troubleshooting: user_guide/troubleshooting_guide.md
      - NNX Best Practices: user_guide/nnx_best_practices.md
      - Checkpointing: user_guide/checkpointing_guide.md
  - Examples:
      - Overview: examples/overview.md
      - Beginner: examples/basic/index.md
      - Quick Reference:
          - Overview: examples/quick-reference/index.md
          - Operator Cheat Sheet: examples/quick-reference/operator-cheatsheet.md
          - Configuration Reference: examples/quick-reference/config-reference.md
          - Error Messages Guide: examples/quick-reference/error-guide.md
      - Core:
          - Simple Pipeline: examples/core/simple-pipeline.md
          - Pipeline Tutorial: examples/core/pipeline-tutorial.md
          - Data Loading Quick Reference: examples/core/data-loading-quickref.md
          - Batch Processing Quick Reference: examples/core/batch-processing-quickref.md
          - Operators Tutorial: examples/core/operators-tutorial.md
          - CIFAR-10 Quick Reference: examples/core/cifar10-quickref.md
          - Augmentation Quick Reference: examples/core/augmentation-quickref.md
          - MNIST Tutorial: examples/core/mnist-tutorial.md
          - Fashion Augmentation: examples/core/fashion-augmentation-tutorial.md
          - Composition Strategies: examples/core/composition-strategies-tutorial.md
          - Advanced Operators: examples/core/advanced-operators-tutorial.md
      - Integration:
          - HuggingFace:
              - Quick Reference: examples/integration/huggingface/hf-quickref.md
              - Tutorial: examples/integration/huggingface/hf-tutorial.md
              - IMDB Example: examples/integration/huggingface/imdb-quickref.md
          - TFDS:
              - Quick Reference: examples/integration/tfds/tfds-quickref.md
          - ArrayRecord:
              - Quick Reference: examples/integration/arrayrecord/arrayrecord-quickref.md
      - Advanced:
          - Augmentation:
              - MixUp & CutMix Tutorial: examples/advanced/augmentation/mixup-cutmix-tutorial.md
          - Checkpointing:
              - Quick Reference: examples/advanced/checkpointing/checkpoint-quickref.md
              - Resumable Training: examples/advanced/checkpointing/resumable-training-guide.md
          - DAG Pipelines:
              - Fundamentals Guide: examples/advanced/dag/dag-fundamentals-guide.md
          - Distributed:
              - Sharding Quick Reference: examples/advanced/distributed/sharding-quickref.md
              - Sharding Guide: examples/advanced/distributed/sharding-guide.md
          - Monitoring:
              - Quick Reference: examples/advanced/monitoring/monitoring-quickref.md
          - Multi-Source:
              - Interleaved Tutorial: examples/advanced/multi_source/interleaved-tutorial.md
          - Performance:
              - Optimization Guide: examples/advanced/performance/optimization-guide.md
          - Sampling:
              - Sampling Tutorial: examples/advanced/sampling/sampling-tutorial.md
          - Training:
              - End-to-End CIFAR-10: examples/advanced/training/e2e-cifar10-guide.md
          - Differentiable Pipelines:
              - DADA Learned Augmentation: examples/advanced/differentiable/dada-learned-augmentation.md
              - Learned ISP Guide: examples/advanced/differentiable/learned-isp-guide.md
              - DDSP Audio Synthesis: examples/advanced/differentiable/ddsp-audio-synthesis.md
  - API Reference:
      - Overview: api_reference/index.md
      - Core Components:
          - Overview: core/index.md
          - batcher: core/batcher.md
          - config: core/config.md
          - cross_modal: core/cross_modal.md
          - data_source: core/data_source.md
          - element_batch: core/element_batch.md
          - metadata: core/metadata.md
          - modality: core/modality.md
          - module: core/module.md
          - operator: core/operator.md
          - sampler: core/sampler.md
          - sharder: core/sharder.md
          - structural: core/structural.md
      - Utilities:
          - Overview: utils/index.md
          - external: utils/external.md
          - prng: utils/prng.md
          - pytree_utils: utils/pytree_utils.md
      - Command Line Interface:
          - Overview: cli/index.md
          - benchmark: cli/benchmark.md
          - main: cli/main.md
      - Batching:
          - Overview: batching/index.md
          - default_batcher: batching/default_batcher.md
      - Benchmarking:
          - Overview: benchmarking/index.md
          - comparative: benchmarking/comparative.md
          - monitor: benchmarking/monitor.md
          - profiler: benchmarking/profiler.md
          - regression: benchmarking/regression.md
          - timing: benchmarking/timing.md
          - statistics: benchmarking/statistics.md
          - resource_monitor: benchmarking/resource_monitor.md
          - results: benchmarking/results.md
      - Checkpoint:
          - Overview: checkpoint/index.md
          - handlers: checkpoint/handlers.md
          - iterators: checkpoint/iterators.md
      - Config:
          - Overview: config/index.md
          - environment: config/environment.md
          - loaders: config/loaders.md
          - registry: config/registry.md
          - schema: config/schema.md
      - Control:
          - Overview: control/index.md
          - prefetcher: control/prefetcher.md
      - Dag:
          - Overview: dag/index.md
          - dag_config: dag/dag_config.md
          - dag_executor: dag/dag_executor.md
          - Nodes:
              - base: dag/base.md
              - caching: dag/caching.md
              - control_flow: dag/control_flow.md
              - data_source: dag/data_source.md
              - field_operators: dag/field_operators.md
              - loaders: dag/loaders.md
              - rebatch: dag/rebatch.md
      - Distributed:
          - Overview: distributed/index.md
          - data_parallel: distributed/data_parallel.md
          - device_mesh: distributed/device_mesh.md
          - device_placement: distributed/device_placement.md
          - metrics: distributed/metrics.md
      - Memory:
          - Overview: memory/index.md
          - shared_memory_manager: memory/shared_memory_manager.md
      - Monitoring:
          - Overview: monitoring/index.md
          - callbacks: monitoring/callbacks.md
          - dag_monitor: monitoring/dag_monitor.md
          - metrics: monitoring/metrics.md
          - pipeline: monitoring/pipeline.md
          - reporters: monitoring/reporters.md
      - Operators:
          - Overview: operators/index.md
          - batch_mix_operator: operators/batch_mix_operator.md
          - composite_operator: operators/composite_operator.md
          - element_operator: operators/element_operator.md
          - map_operator: operators/map_operator.md
          - probabilistic_operator: operators/probabilistic_operator.md
          - selector_operator: operators/selector_operator.md
          - Image:
              - brightness_operator: operators/brightness_operator.md
              - contrast_operator: operators/contrast_operator.md
              - dropout_operator: operators/dropout_operator.md
              - functional: operators/functional.md
              - noise_operator: operators/noise_operator.md
              - patch_dropout_operator: operators/patch_dropout_operator.md
              - rotation_operator: operators/rotation_operator.md
          - Strategies:
              - base: operators/base.md
              - branching: operators/branching.md
              - ensemble: operators/ensemble.md
              - merging: operators/merging.md
              - parallel: operators/parallel.md
              - sequential: operators/sequential.md
      - Performance:
          - Overview: performance/index.md
          - roofline: performance/roofline.md
          - xla_optimization: performance/xla_optimization.md
      - Types & Protocols:
          - Overview: root/index.md
          - typing: root/typing.md
      - Samplers:
          - Overview: samplers/index.md
          - epoch_aware_sampler: samplers/epoch_aware_sampler.md
          - range_sampler: samplers/range_sampler.md
          - sequential_sampler: samplers/sequential_sampler.md
          - shuffle_sampler: samplers/shuffle_sampler.md
      - Sharding:
          - Overview: sharding/index.md
          - array_sharder: sharding/array_sharder.md
          - jax_process_sharder: sharding/jax_process_sharder.md
      - Sources:
          - Overview: sources/index.md
          - array_record_source: sources/array_record_source.md
          - hf_source: sources/hf_source.md
          - memory_source: sources/memory_source.md
          - mixed_source: sources/mixed_source.md
          - tfds_source: sources/tfds_source.md
  - Benchmarks:
      - Overview: benchmarks/index.md
      - Methodology: benchmarks/methodology.md
      - Framework Comparison: benchmarks/comparison.md
      - Cloud Benchmarking: benchmarks/cloud.md
      - Dashboard & benchkit: benchmarks/dashboard.md
  - Contributing:
      - Guide: contributing/contributing_guide.md
      - Example Documentation Design: contributing/example_documentation_design.md
      - Performance: contributing/performance_optimization_guide.md
      - Developer Guide: contributing/dev_guide.md
      - Testing Guide: contributing/testing_guide.md
      - GPU Testing: contributing/gpu_testing.md
      - Test Structure: contributing/test_structure.md
      - Docker: contributing/docker.md
      - Type Issues Guide: contributing/type_issues_guide.md
